<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Galactic Typing Blast</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;height:100%;background:#121633;}
body{font-family:'Consolas',monospace;background:#000 url('https://upload.wikimedia.org/wikipedia/commons/1/17/ESA_Hubble_Ultra_Deep_Field_part_d.png') center/cover no-repeat;}
#hud{position:absolute;top:16px;right:16px;left:16px;text-align:center;color:#f0ffff;z-index:2;}
#hud h1{margin:0;font-size:2em;color:#57c6ff;text-shadow:0 0 18px #00337a;}
#overlay,#pauseMenu{position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(12,19,39,0.91);z-index:10;}
#overlay h2,#pauseMenu h2{color:#8ce9ff;margin-bottom:18px;}
.menu-btn{padding:12px 32px;font-size:1.1em;border:none;border-radius:14px;cursor:pointer;font-family:inherit;background:#3281db;color:#fff;box-shadow:0 0 18px #00337a;}
.menu-btn:hover{background:#1bd6ff;}
.stats{color:#fff;font-size:1.2em;}
canvas{display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="hud">
  <h1>Galactic Typing Blast</h1>
  <div>Level: <span id="level">1</span> · Score: <span id="score">0</span> · EMP: <span id="emp_ready">No</span></div>
</div>
<div id="overlay">
  <h2>Galactic Typing Blast</h2>
  <div class="stats">Type space words to blast enemy ships.<br/>EMP (spacebar) every 15 kills.<br/>If an enemy gets past you, it's game over!</div>
  <button class="menu-btn" id="startBtn">Start Game</button>
</div>
<div id="pauseMenu" style="display:none">
  <h2>Game Paused</h2>
  <div class="stats">Press Resume to continue or Restart for a new session.</div>
  <button class="menu-btn" id="resumeBtn">Resume</button>
  <button class="menu-btn" id="restartBtn">Restart</button>
</div>
<script>
// Space-themed plus neutral words
const wordList = [
  'galaxy','neutron','meteor','cosmos','jupiter','astronaut','probe','orbit','rocket','eclipse','asteroid','crater','telescope','launch','nebula','satellite','ufo','star','moon','planet','comet','plasma','gravity','energy','system','element',
  'phase','pulse','dream','echo','vapor','scope','sketch','blade','spark','trace','summit','craft','bullet','speed','burst','scan','flame','dust','prime','myth','plot','rhyme','scale','frost','spell','spike','steam','swing','zone','crest','mesh',
  'hydro','blast','solar','agent','blackhole','drift','streak','orbit','quantum','stellar','silicon','apollo','sirius','venus','mars','shuttle','aster','milkyway','transit','uranus','comet','dawn','void','magnet','belt','constellation','beam','asteroid'
];
const icons = [
  // SVG enemy icons (UFO, astronaut, satellite, etc.)
  function(ctx,x,y,scale=1){
    ctx.save();
    ctx.translate(x,y);ctx.scale(scale,scale);
    ctx.beginPath();ctx.arc(0,0,15,0,2*Math.PI);
    ctx.fillStyle="#eaeef0";ctx.shadowBlur=14;ctx.shadowColor="#2cd4ff";ctx.fill(); // UFO orb
    ctx.beginPath();ctx.ellipse(0,10,19,7,0,0,Math.PI*2);
    ctx.fillStyle="#9eefff";ctx.globalAlpha=0.6;ctx.fill();
    ctx.globalAlpha=1;ctx.restore();
  },
  function(ctx,x,y,scale=1){
    ctx.save();ctx.translate(x,y);ctx.scale(scale,scale);
    ctx.beginPath();ctx.arc(0,0,10,0,2*Math.PI);
    ctx.fillStyle="#fffad3";ctx.shadowBlur=11;ctx.shadowColor="#2cd4ff";ctx.fill(); // Astronaut helmet
    ctx.beginPath();ctx.rect(-6,10,12,11);
    ctx.fillStyle="#99bdfc";ctx.fill();
    ctx.restore();
  },
  function(ctx,x,y,scale=1){
    ctx.save();ctx.translate(x,y);ctx.scale(scale,scale);
    ctx.beginPath();ctx.moveTo(-10,10);ctx.lineTo(0,-9);ctx.lineTo(10,10);ctx.closePath();
    ctx.fillStyle="#c2d4dd";ctx.shadowBlur=6;ctx.shadowColor="#2cd4ff";ctx.fill(); // Satellite
    ctx.beginPath();ctx.rect(-3,6,6,8);
    ctx.fillStyle="#8ce9ff";ctx.fill();
    ctx.restore();
  }
];

const c=document.getElementById('c'),ctx=c.getContext('2d');
c.width=innerWidth;c.height=innerHeight;
let enemies=[],bullets=[],particles=[];
let score=0,activeEnemy=null,empAvailable=false,killstreak=0;
let player={x:c.width/2,y:c.height-80},level=1,words=[],maxLevel=8;
let gameStarted=false,paused=false,last=0,spawnTimer=0,levelTimer=0,gameOver=false;

// Setup overlays and controls
const overlay=document.getElementById('overlay'),pauseMenu=document.getElementById('pauseMenu');
document.getElementById('startBtn').onclick=startGame;
document.getElementById('resumeBtn').onclick=()=>{paused=false;pauseMenu.style.display='none';};
document.getElementById('restartBtn').onclick=()=>{pauseMenu.style.display='none';startGame();};

window.addEventListener('keydown',e=>{
  if(!gameStarted||gameOver)return;
  if(e.key==='Escape' && !gameOver){
    paused=!paused;pauseMenu.style.display=paused?'flex':'none';
  }
});

// Utility
function rand(a,b){return Math.random()*(b-a)+a;}
function pickIcon() {
  let idx = Math.floor(rand(0,icons.length)); return icons[idx];
}

// Spaceship SVG icon
function drawSpaceship(ctx,x,y,scale=1.65){
  ctx.save();ctx.translate(x,y);ctx.scale(scale,scale);
  ctx.beginPath();
  ctx.moveTo(0,-19);ctx.bezierCurveTo(-13,-18,-13,9,0,13);
  ctx.bezierCurveTo(13,9,13,-18,0,-19);
  ctx.lineTo(0,10);ctx.lineTo(-6,14);ctx.lineTo(0,20);ctx.lineTo(6,14);ctx.lineTo(0,10);
  ctx.closePath();
  ctx.fillStyle="#a4fdff";
  ctx.shadowBlur=18;ctx.shadowColor="#8ce9ff";
  ctx.fill();ctx.restore();
}

// Enemies
function spawnEnemy(){
  if(words.length===0)return;
  const index=Math.floor(Math.random()*words.length), word=words.splice(index,1)[0];
  // Game level affects speed/word length
  let sAdd = Math.min(level*0.14, 0.56), lenAdd = Math.min(level-1,2);
  let newWord = (word.length<6) ? word+wordList[Math.floor(Math.random()*wordList.length)].slice(0,lenAdd) : word;
  enemies.push({
    x:rand(75,c.width-135), y:-38, 
    word:newWord, progress:0,
    speed:rand(0.56+sAdd,0.92+sAdd), hit:false,
    draw:pickIcon()
  });
}

// Visuals/background
function drawBackground(){
  ctx.save();
  let grd=ctx.createRadialGradient(c.width/2,c.height/2,50,c.width/2,c.height/2,c.width*0.42);
  grd.addColorStop(0,"#8cfaff45");grd.addColorStop(1,"#110d29");
  ctx.fillStyle=grd;ctx.fillRect(0,0,c.width,c.height);
  ctx.restore();
}

// HUD/Player/Enemies/Particles
function drawEnemies(){
  enemies.forEach(e=>{
    ctx.save();
    e.draw(ctx,e.x,e.y,1.2);

    ctx.font = "bold 24px Consolas";
    ctx.textAlign = "left";
    ctx.textBaseline = "middle";
    let done = e.word.slice(0, e.progress), todo = e.word.slice(e.progress);
    let offset = ctx.measureText(done).width;

    // Draw completed letters (high contrast yellow, black shadow)
    ctx.fillStyle = "#ffe843";
    ctx.shadowColor = "#222";
    ctx.shadowBlur = 4;
    ctx.fillText(done, e.x - 28, e.y - 20);

    // Draw remaining letters (cyan/white, with dark shadow for contrast)
    ctx.fillStyle = "#f0f8ff";
    ctx.shadowColor = "#003058";
    ctx.shadowBlur = 6;
    ctx.fillText(todo, e.x - 28 + offset, e.y - 20);

    ctx.restore();
  });
}

function drawBullets(){
  bullets.forEach(b=>{
    ctx.save();
    ctx.strokeStyle="#faff57";ctx.lineWidth=2;
    ctx.shadowBlur=8;ctx.shadowColor="#ebf38c";
    ctx.beginPath();ctx.moveTo(b.x,b.y+10);ctx.lineTo(b.x,b.y);ctx.stroke();
    ctx.restore();
  });
}
function drawParticles(){
  for(let p of particles){
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
    ctx.fillStyle=`rgba(${p.col},${p.a})`;ctx.fill();
  }
}
function drawPlayer(){
  drawSpaceship(ctx,player.x,player.y,1.65);
}

function update(dt){
  if(!gameStarted||paused||gameOver)return;
  drawBackground();
  levelTimer+=dt/1000;
  if(levelTimer>19 && level<maxLevel){
    level++;levelTimer=0;
    document.getElementById("level").textContent=level;
  }
  // Spawn enemies, increase rate per level
  spawnTimer+=dt;
  if(spawnTimer>920-(level*53)&&words.length>0){
    spawnEnemy();spawnTimer=0;
  }
  enemies.forEach(e=>e.y+=e.speed*dt*0.051);
  bullets.forEach(b=>{
    if(b.target){
      let dx=b.target.x-b.x, dy=b.target.y-b.y;
      let len=Math.hypot(dx,dy);if(len>0){dx/=len;dy/=len;}
      b.x+=dx*dt*0.43;b.y+=dy*dt*0.44;
      if(len<21){b.target.hit=true;explode(b.target.x,b.target.y);b.remove=true; playBlastSound();}
    }
    else b.y-=dt*0.64;
  });
  bullets=bullets.filter(b=>!b.remove && b.y>-18);

  // Game Over on enemy crossing base
  enemies.forEach(e=>{
    if(e.y>player.y+22&&!e.hit){
      playExplosionSound();showGameOver();
    }
  });
  enemies=enemies.filter(e=>{
    if(e.hit){
      score+=10;killstreak++;
      document.getElementById('score').textContent=score;
      if(killstreak%15===0&&killstreak>0){empAvailable=true;document.getElementById('emp_ready').textContent='Yes';}
      return false;}
    return !gameOver;
  });
  particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.a-=0.021;});
  particles=particles.filter(p=>p.a>0);
}

function explode(x,y){
  for(let i=0;i<35;i++){
    particles.push({x,y,vx:rand(-2.5,2.4),vy:rand(-2.3,2.7),r:rand(1,3.8),col:"220,255,240",a:1});
  }
}

// Audio
function playExplosionSound() {
  let ctx = new (window.AudioContext||window.webkitAudioContext)();
  let o = ctx.createOscillator(), g = ctx.createGain();
  o.type='square'; o.frequency.value=110;
  g.gain.value=0.32; o.connect(g); g.connect(ctx.destination);
  o.start();
  setTimeout(()=>{g.gain.linearRampToValueAtTime(0,ctx.currentTime+0.14)},55);
  setTimeout(()=>{o.stop();ctx.close()},180);
}
function playBlastSound() {
  let ctx = new (window.AudioContext||window.webkitAudioContext)();
  let o = ctx.createOscillator(), g = ctx.createGain();
  o.type='triangle'; o.frequency.value=370;
  g.gain.value=0.13; o.connect(g); g.connect(ctx.destination);
  o.start();
  setTimeout(()=>{g.gain.linearRampToValueAtTime(0,ctx.currentTime+0.07)},19);
  setTimeout(()=>{o.stop();ctx.close()},70);
}

function fireAtTarget(target){bullets.push({x:player.x,y:player.y-22,target});}
function emp(){
  if(!empAvailable)return;
  enemies.forEach(e=>{explode(e.x,e.y); playBlastSound();});
  enemies=[];empAvailable=false;
  document.getElementById('emp_ready').textContent='No';
}
document.addEventListener('keydown',e=>{
  if(!gameStarted||paused||gameOver)return;
  if(e.key===" "){emp();return;}
  if(e.key==="Escape"){paused=!paused;pauseMenu.style.display=paused?'flex':'none';return;}
  const k=e.key.toLowerCase();
  if(!/^[a-z]$/.test(k))return;
  if(!activeEnemy)
    activeEnemy=enemies.find(e=>e.word[e.progress]===k);
  if(!activeEnemy)return;
  if(k===activeEnemy.word[activeEnemy.progress]){
    fireAtTarget(activeEnemy); activeEnemy.progress++;
    if(activeEnemy.progress>=activeEnemy.word.length){
      explode(activeEnemy.x,activeEnemy.y); playBlastSound();
      enemies.splice(enemies.indexOf(activeEnemy),1);
      activeEnemy=null;score+=10;killstreak++;
      document.getElementById('score').textContent=score;
      if(killstreak%15===0&&killstreak>0){empAvailable=true;document.getElementById('emp_ready').textContent='Yes';}
    }
  }else activeEnemy=null;
});

// Game Start, Game Over logic
function startGame(){
  overlay.style.display='none';gameStarted=true;paused=false;score=0;killstreak=0;level=1;gameOver=false;
  enemies=[],bullets=[],particles=[],words=wordList.slice();
  document.getElementById('score').textContent=score;
  document.getElementById('emp_ready').textContent='No';
  document.getElementById('level').textContent=level;
  spawnTimer=0;levelTimer=0;
}
function showGameOver() {
  gameOver = true; paused = false;
  setTimeout(()=>{overlay.querySelector('h2').textContent = "Game Over";
    overlay.querySelector('.stats').textContent = "Score: "+score+". Click Start Game to play again.";
    overlay.style.display='flex';},900);
}

// Drawing loop
function loop(t){
  const dt=t-last;last=t;
  ctx.clearRect(0,0,c.width,c.height);
  update(dt); drawPlayer(); drawEnemies(); drawBullets(); drawParticles();
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Responsive
window.addEventListener("resize",()=>{
  c.width=innerWidth;c.height=innerHeight;player.x=c.width/2;player.y=c.height-80;
});
</script>
</body>
</html>
